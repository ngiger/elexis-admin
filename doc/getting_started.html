<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta name="generator" content="http://www.nongnu.org/elyxer/"/>
<meta name="create-date" content="2010-11-09"/>
<link rel="stylesheet" href="http://www.nongnu.org/elyxer/lyx.css" type="text/css" media="screen"/>
<title>Puppet</title>
</head>
<body>
<div id="globalWrapper">

<h1 class="title">
Puppet
</h1>
<div class="abstract">

<p class="abstract-message">
Abstract
</p>Wie Niklaus lernte, Puppet einzusetzen. Ein Erfahrungsbericht.
</div>
<div class="Address">
Niklaus Giger, Wieshoschet 6, CH-8753 Mollis
</div>
<h1 class="Section">
<a class="toc" name="toc-Section-1">1</a> Ziele
</h1>
<div class="Unindented">
Aufsetzen/Dokumentation so zu gestalten, dass andere Medelexis OC interessiert sind, mitzuarbeiten. Dazu unter GitHub das Projekt <a class="URL" href="https://github.com/ngiger/elexis-admin">elexis-admin</a>eröffnet, wo u.a. auch der aktuelle Stand dieser Datei zu finden ist.
</div>
<div class="Indented">
Merkblatt, wie/wo gewisse Sachen von Puppet dokumentiert sind.
</div>
<div class="Indented">
Meine Ziele/Anforderungen an Puppet dokumentieren.
</div>
<div class="Indented">
Fortschritt/Entscheidungen dokumentieren.
</div>
<div class="Indented">
Lyx -X HTML
</div>
<h1 class="Section">
<a class="toc" name="toc-Section-2">2</a> Einstieg
</h1>
<h2 class="Subsection">
<a class="toc" name="toc-Subsection-2.1">2.1</a> Warum?
</h2>
<div class="Unindented">
Ich habe ja vor Jahren es mit cfengine versucht und bin davon abgekommen. Warum?
</div>
<ul>

<li>
Aufwand/Ertrag für mein kleines heterogenes (PPC, Intel) Heimnetzwerk zu gross.
</li>
<li>
Debian-Konfiguration änderte sich im Laufe der Jahre. Defaults wurden besser, meine alten Rezepte funktionierten nicht mehr und machten gewisse Teile unbrauchbar. Dieses Problem kann nur angegangen werden, indem man die Änderungen jeweils nach einem Upgrade des betroffenen Pakets kritisch hinterfrägt.
</li>
<li>
Zentrales Logging der Änderungen/Abläufe wurde nicht richtig implementiert.
</li>
<li>
Für gewisse Probleme wäre die Benutzung einer “echten” Script-Sprache praktisch.
</li>
<li>
Nicht Idem/Potent. Häufig mit cfengine &lt;timestamp&gt; gearbeitet, damit Dateien nicht dauernd neu erstellt wurden.
</li>
</ul>
<h3 class="Subsubsection">
<a class="toc" name="toc-Subsubsection-2.1.1">2.1.1</a> Auslöser
</h3>
<div class="Unindented">
2010 habe ich für Elexis-Server und andere mit Hilfe von simple-cdd kundenspezifische Installation von GNU/Debian-Linux durchgeführt, welche von einigen wenigen Text-Dateien getrieben wurden (den profiles von simple-cdd). Aufwand/Ertrag waren gut, sobald man akzeptiert, dass die Testing-Distribution von Debian hin und wieder zu Abbrüchen führt.
</div>
<div class="Indented">
Bei Installation von cosre (Mai 2010) und erstem Server (bbuechel, November 2010) festgestellt, dass diese Installation machbar sind, wegen HW-Problemen (z.B. zusätzliche HD-Disk in grub-inkompatibler Reihenfolge) scheitern können. Nachher kommen im Laufe der Zeit neue Anforderungen auf, welche keine Neu-Installation erfordern sollten. Beispiele dafür sind neue Applikationen (z.B. ein Praxis-Wiki, neue Benutzer, Samba).
</div>
<div class="Indented">
Deshalb nach einem Tool gesucht, dass automatisch die Konfiguration eines Server à jour halten kann. Nach Alternativen zu cfengine gesucht und Puppet gefunden.
</div>
<h2 class="Subsection">
<a class="toc" name="toc-Subsection-2.2">2.2</a> Einarbeitung
</h2>
<div class="Unindented">
Doku unter <a class="URL" href="http://docs.puppetlabs.com/">http://docs.puppetlabs.com/</a> quer durchgelesen, um Konzepte zu verstehen.
</div>
<div class="Indented">
Für Debian gibt es unter <a class="URL" href="http://www.debian-administration.org/articles/526">http://www.debian-administration.org/articles/526</a> eine gute Anleitung, wie man rasch ein kleines Netzwerk mit Puppet startklar macht. Falls man Lenny auf dem Server installiert hat, wird puppet am besten via <a class="URL" href="http://wiki.debian.org/Backports">debian-backports</a> installiert.
</div>
<div class="Indented">
Dabei suchte ich v.a. auch nach Vorlagen wie gesamte Sites gemanaged werden können und fand sie z.B. in folgenden Orten
</div>
<ul>

<li>
<a class="URL" href="http://projects.puppetlabs.com/projects/puppet/wiki/Complete_Configuration">http://projects.puppetlabs.com/projects/puppet/wiki/Complete_Configuration</a>. Web-Server der alles veröffentlicht, inkl. Beispiele für sich selber und seine Eltern.
</li>
<li>
Die ETH-Zürich scheint es zu gebrauchen: <a class="URL" href="http://git.sans.ethz.ch/">http://git.sans.ethz.ch/</a>
</li>
<li>
Diverse Module/Applikationen findet man unter <a class="URL" href="http://forge.puppetlabs.com/">http://forge.puppetlabs.com/</a>
</li>
</ul>
<div class="Unindented">
Dieses Dokument begonnen.
</div>
<div class="Indented">
http://www.debian-administration.org/articles/526
</div>
<div class="Indented">
Dort beklagt sich auch jemand, dass puppet viel zuviel Memory braucht (400 MB)
</div>
<div class="Indented">
http://projects.puppetlabs.com/projects/1/wiki/Using_Thin_Nginx
</div>
<h2 class="Subsection">
<a class="toc" name="toc-Subsection-2.3">2.3</a> Vorstellungen
</h2>
<div class="Unindented">
github (oder ähnliches) gebrauchen und Projekt/Absicht bei Medelexis-OC &amp; Elexis-Entwickler-Treffen ankündigen.
</div>
<div class="Indented">
Beginnen mit autofs-Konfiguration (das kann ich nämlich gebrauchen und ist etwas trickreich). 4hudson (export/uses)
</div>
<div class="Indented">
Checkout von git-repository
</div>
<div class="Indented">
etckeeper einbauen
</div>
<div class="Indented">
Danach Benutzer-Konfiguration mit folgenden Anforderungen:
</div>
<ul>

<li>
Benutzer/Passwort-Kombination von nicht public lesbaren Ort holen. Oder gleiches Default-Passwort für alle Benutzer. Dazu Extlookup benutzen (Siehe Release Notes 2.6.1)
</li>
<li>
Yubico-Key verwenden (Optional)
</li>
<li>
Beim Aufsetzen Passwort muss sofort geändert werden.
</li>
</ul>
<div class="Unindented">
Puppet-Master verwenden (ngiger.dyndns.org zu Beginn, für Demo-Zwecke github)
</div>
<div class="Indented">
Report generieren und ablegen.
</div>
<div class="Indented">
Wie die SSH-Zertifikate von Server, Client, Benutzer, Firewall (OpenVPN) sicher verwalten. Integration in simple-cdd (z.B. Puppet, OpenSSH-Server, OpenVPN installieren und Zertifikate vom Puppet-Master holen oder auf CD mitbringen). OpenVPN immer/nur auf Verlangen verbunden zu PuppetMaster.
</div>
<div class="Indented">
DHCP oder fixe IP/hostname/domainname/gateway verwenden (simple-cdd)
</div>
<div class="Indented">
Postgres/MySql Hot-Backup verwenden.
</div>
<div class="Indented">
Auf Home-PCs wie gs,mm,transtec diejenigen Pakete/Sachen mit Puppet verwalten, welche nicht mit den Defaults von Debian abgedeckt werden. Wichtige Pakete (etckeeper, git, cups, autofs, rsync) per Default installieren.
</div>
<div class="Indented">
http://rdiff-backup.nongnu.org/ with puppet-module!
</div>
<div class="Indented">
Bridge für virtuelle Maschinen offerieren.
</div>

<hr class="footer"/>
<div class="footer" id="generated-by">
Document generated by <a href="http://elyxer.nongnu.org/">eLyXer 0.98 (2010-05-13)</a> on <span class="create-date">2010-11-09T15:59:41.662415</span>
</div>
</div>
</body>
</html>
